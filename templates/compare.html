<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Compare original vs. mitigated</title>
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', path='/style/biaschart.css') }}">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static', path='/style/dlchart.css') }}">
</head>
<body>

	<h1>Compare</h1>
	<table>
		<thead>
			<tr>
				<th></th>
				<th>Original</th>
				<th>Mitigated</th>
			</tr>
		</thead>
		<tbody>
			<tr>
				<th>Recall</th>
				<td>{{ original.recall }}</td>
				<td>{{ mitigated.recall }}</td>
			</tr>
			<tr>
				<th>True negative rate</th>
				<td>{{ original.true_negative_rate }}</td>
				<td>{{ mitigated.true_negative_rate }}</td>
			</tr>
			<tr>
				<th>False positive rate</th>
				<td>{{ original.false_positive_rate }}</td>
				<td>{{ mitigated.false_positive_rate }}</td>
			</tr>
			<tr>
				<th>False negative rate</th>
				<td>{{ original.false_negative_rate }}</td>
				<td>{{ mitigated.false_negative_rate }}</td>
			</tr>
			<tr>
				<th>Precision</th>
				<td>{{ original.precision }}</td>
				<td>{{ mitigated.precision }}</td>
			</tr>
			<tr>
				<th>Negative predictive value</th>
				<td>{{ original.negative_predictive_value }}</td>
				<td>{{ mitigated.negative_predictive_value }}</td>
			</tr>
			<tr>
				<th>False discovery rate</th>
				<td>{{ original.false_discovery_rate }}</td>
				<td>{{ mitigated.false_discovery_rate }}</td>
			</tr>
			<tr>
				<th>False omission rate</th>
				<td>{{ original.false_omission_rate }}</td>
				<td>{{ mitigated.false_omission_rate }}</td>
			</tr>
			<tr>
				<th>Accuracy</th>
				<td>{{ original.accuracy }}</td>
				<td>{{ mitigated.accuracy }}</td>
			</tr>
			<tr>
				<th>Error rate</th>
				<td>{{ original.error_rate }}</td>
				<td>{{ mitigated.error_rate }}</td>
			</tr>
			<tr>
				<th>Average odds difference</th>
				<td>{{ original.average_odds_difference }}</td>
				<td>{{ mitigated.average_odds_difference }}</td>
			</tr>
			<tr>
				<th>Average abs odds difference</th>
				<td>{{ original.average_abs_odds_difference }}</td>
				<td>{{ mitigated.average_abs_odds_difference }}</td>
			</tr>
			<tr>
				<th>Selection rate</th>
				<td>{{ original.selection_rate }}</td>
				<td>{{ mitigated.selection_rate }}</td>
			</tr>
			<tr>
				<th>Disparate impact</th>
				<td>{{ original.disparate_impact }}</td>
				<td>{{ mitigated.disparate_impact }}</td>
			</tr>
			<tr>
				<th>Statistical parity difference</th>
				<td>{{ original.statistical_parity_difference }}</td>
				<td>{{ mitigated.statistical_parity_difference }}</td>
			</tr>
			<tr>
				<th>Generalized entropy index</th>
				<td>{{ original.generalized_entropy_index }}</td>
				<td>{{ mitigated.generalized_entropy_index }}</td>
			</tr>
			<tr>
				<th>Theil index</th>
				<td>{{ original.theil_index }}</td>
				<td>{{ mitigated.theil_index }}</td>
			</tr>
			<tr>
				<th>Equal opportunity difference</th>
				<td>{{ original.equal_opportunity_difference }}</td>
				<td>{{ mitigated.equal_opportunity_difference }}</td>
			</tr>
		</tbody>
	</table>

	<h1>Chart</h1>
	<!-- Bias chart area -->
	<div>
		<figure class="highcharts-figure">
			<div id="performance_chart" class="bar"></div>
			<div id="bias_chart" class="bar"></div>
		</figure>
	</div>

	<!-- Bias chart script -->
	<script src="https://code.highcharts.com/highcharts.js"></script>
	<script src="https://code.highcharts.com/highcharts-3d.js"></script>
	<script src="https://code.highcharts.com/highcharts-more.js"></script>
	<script src="/static/src/bias_chart.js"></script>

	<!-- Resource Script -->
	<script>
		const performanceMeasure = {
			original: [{{ original.true_negative_rate }}, {{ original.false_positive_rate }}, {{ original.false_negative_rate }}, {{ original.recall }}, {{ original.precision }}, {{ original.negative_predictive_value }}, {{ original.false_discovery_rate }}, {{ original.false_omission_rate }}, {{ original.accuracy }} ],
			mitigated: [{{ mitigated.true_negative_rate }}, {{ mitigated.false_positive_rate }}, {{ mitigated.false_negative_rate }}, {{ mitigated.recall }}, {{ mitigated.precision }}, {{ mitigated.negative_predictive_value }}, {{ mitigated.false_discovery_rate }}, {{ mitigated.false_omission_rate }}, {{ mitigated.accuracy }}]
		};

		const biasMeasure = {
			original: [{{ original.average_odds_difference }}, {{ original.selection_rate }}, {{ original.disparate_impact }}, {{ original.statistical_parity_difference }}, {{ original.theil_index }}, {{ original.equal_opportunity_difference }}],
			mitigated: [{{ mitigated.average_odds_difference }}, {{ mitigated.selection_rate }}, {{ mitigated.disparate_impact }}, {{ mitigated.statistical_parity_difference }}, {{ mitigated.theil_index }}, {{ mitigated.equal_opportunity_difference }}]
		};
		

		const performanceBar = new BarChart("performance_chart");
		performanceBar.setAxis(["TNR", "FPR", "FNR", "Recall", "Precision", "NPV", "FDR", "FOR", "ACC"]);
		performanceBar.push(performanceMeasure.original, {color: "#FF0000bb", name: "Original"});
		performanceBar.push(performanceMeasure.mitigated, {name: "Mitigated"});
		performanceBar.show();

		const biasBar = new BarChart("bias_chart");
		biasBar.setAxis(["Average odds difference", "Selection rate", "Disparate impact", "Statistical parity difference", "Theil index", "Equal opportunity difference"]);
		biasBar.push(biasMeasure.original, {color: "#FF0000bb", name: "Original"});
		biasBar.push(biasMeasure.mitigated, {name: "Mitigated"});
		biasBar.show();
	</script>

	<br>
	<a href="/data">Home</a>
</body>
</html>
<!DOCTYPE HTML>
<!--
	Hyperspace by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Compare Models - MAF</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="/static/assets/css/main.css" />
		<noscript><link rel="stylesheet" href="/static/assets/css/noscript.css" /></noscript>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a href="/" class="title">MAF</a>
				<nav>
					<ul>
						<li><a href="/">Home</a></li>
						<li><a href="/data">Data</a></li>
						<li><a href="/original/{{ data_name }}">Metrics</a></li>
						<li><a href="/algorithm/{{ data_name }}">Algorithms</a></li>
						<li><a href="#" class="active">Compare</a></li>
					</ul>
				</nav>
			</header>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Main -->
					<section id="main" class="wrapper">
						<div class="inner">
							<div class="row">
								<div class="col-6 col-12-medium">
									<ul class="actions">
										<li><a href="/" class="button fit">Home</a></li>
										<li><a href="/data" class="button fit">Data selection</a></li>
									</ul>
								</div>
							</div>
							<h1 class="major">Compare models</h1>
							<!-- Text -->
								<section>
									<ul class="alt">
										<li><b>Dataset</b>: {{ data_name }}</li>
										<li><b>Protected attribute</b>: {{ original.data.protected }}</li>
										{% if algo_id == 1 %}
											<li><b>Mitigation algorithm</b>: Disparate impact remover</li>
										{% elif algo_id == 2 %}
											<li><b>Mitigation algorithm</b>: Learning fair representation</li>
										{% elif algo_id == 3 %}
											<li><b>Mitigation algorithm</b>: Reweighting</li>
										{% elif algo_id == 4 %}
											<li><b>Mitigation algorithm</b>: Adversarial debiasing</li>
										{% elif algo_id == 5 %}
											<li><b>Mitigation algorithm</b>: Gerry fair classfier</li>
										{% elif algo_id == 6 %}
											<li><b>Mitigation algorithm</b>: Meta fair classifier</li>
										{% elif algo_id == 7 %}
											<li><b>Mitigation algorithm</b>: Prejudice remover</li>
										{% elif algo_id == 8 %}
											<li><b>Mitigation algorithm</b>: Fair batch</li>
										{% elif algo_id == 9 %}
											<li><b>Mitigation algorithm</b>: Fair feature distillation</li>
										{% elif algo_id == 10 %}
											<li><b>Mitigation algorithm</b>: Fairness VAE</li>
										{% elif algo_id == 11 %}
											<li><b>Mitigation algorithm</b>: Kernel density estimation</li>
										{% elif algo_id == 12 %}
											<li><b>Mitigation algorithm</b>: Learning from fairness</li>
										{% elif algo_id == 13 %}
											<li><b>Mitigation algorithm</b>: Calibrated equalized odds</li>
										{% elif algo_id == 14 %}
											<li><b>Mitigation algorithm</b>: Equalized odds</li>
										{% elif algo_id == 15 %}
											<li><b>Mitigation algorithm</b>: Reject option</li>
										{% else %}
											<li><b>Mitigation algorithm</b>: File</li>
										{% endif %}
									</ul>
								</section>
							
							<!-- Table -->
								<h2>Tables of metrics</h2>
								<section>
									<h3>A. Performance metrics</h3>
									<div class="table-wrapper">
										<table>
											<thead>
												<tr>
													<th>Attribute</th>
													<th>Original Value</th>
													<th>Mitigated Value</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Recall</td>
													{% if original.performance.recall >= mitigated.performance.recall %}
														<td><b>{{ original.performance.recall }}</b></td>
														<td>{{ mitigated.performance.recall }}</td>
													{% else %}
														<td>{{ original.performance.recall }}</td>
														<td><b>{{ mitigated.performance.recall }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>True negative rate</td>
													{% if original.performance.true_negative_rate >= mitigated.performance.true_negative_rate %}
														<td><b>{{ original.performance.true_negative_rate }}</b></td>
														<td>{{ mitigated.performance.true_negative_rate }}</td>
													{% else %}
														<td>{{ original.performance.true_negative_rate }}</td>
														<td><b>{{ mitigated.performance.true_negative_rate }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>False positive rate</td>
													{% if original.performance.false_positive_rate >= mitigated.performance.false_positive_rate %}
														<td><b>{{ original.performance.false_positive_rate }}</b></td>
														<td>{{ mitigated.performance.false_positive_rate }}</td>
													{% else %}
														<td>{{ original.performance.false_positive_rate }}</td>
														<td><b>{{ mitigated.performance.false_positive_rate }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>False negative rate</td>
													{% if original.performance.false_negative_rate >= mitigated.performance.false_negative_rate %}
														<td><b>{{ original.performance.false_negative_rate }}</b></td>
														<td>{{ mitigated.performance.false_negative_rate }}</td>
													{% else %}
														<td>{{ original.performance.false_negative_rate }}</td>
														<td><b>{{ mitigated.performance.false_negative_rate }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>Precision</td>
													{% if original.performance.precision >= mitigated.performance.precision %}
														<td><b>{{ original.performance.precision }}</b></td>
														<td>{{ mitigated.performance.precision }}</td>
													{% else %}
														<td>{{ original.performance.precision }}</td>
														<td><b>{{ mitigated.performance.precision }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>Negative predictive value</td>
													{% if original.performance.negative_predictive_value >= mitigated.performance.negative_predictive_value %}
														<td><b>{{ original.performance.negative_predictive_value }}</b></td>
														<td>{{ mitigated.performance.negative_predictive_value }}</td>
													{% else %}
														<td>{{ original.performance.negative_predictive_value }}</td>
														<td><b>{{ mitigated.performance.negative_predictive_value }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>False discovery rate</td>
													{% if original.performance.false_discovery_rate >= mitigated.performance.false_discovery_rate %}
														<td><b>{{ original.performance.false_discovery_rate }}</b></td>
														<td>{{ mitigated.performance.false_discovery_rate }}</td>
													{% else %}
														<td>{{ original.performance.false_discovery_rate }}</td>
														<td><b>{{ mitigated.performance.false_discovery_rate }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>False omission rate</td>
													{% if original.performance.false_omission_rate >= mitigated.performance.false_omission_rate %}
														<td><b>{{ original.performance.false_omission_rate }}</b></td>
														<td>{{ mitigated.performance.false_omission_rate }}</td>
													{% else %}
														<td>{{ original.performance.false_omission_rate }}</td>
														<td><b>{{ mitigated.performance.false_omission_rate }}</b></td>
													{% endif %}
												</tr>
												<tr>
													<td>Accuracy</td>
													{% if original.performance.accuracy >= mitigated.performance.accuracy %}
														<td><b>{{ original.performance.accuracy }}</b></td>
														<td>{{ mitigated.performance.accuracy }}</td>
													{% else %}
														<td>{{ original.performance.accuracy }}</td>
														<td><b>{{ mitigated.performance.accuracy }}</b></td>
													{% endif %}
												</tr>
											</tbody>
										</table>
									</div>
								</section>
								<section>
									<h3>B. Classification metrics</h3>
									<div class="table-wrapper">
										<table>
											<thead>
												<tr>
													<th>Attribute</th>
													<th>Original value</th>
													<th>Mitigated value</th>
													<th>Fairness value</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Error rate</td>
													{% if original.classify.error_rate >= mitigated.classify.error_rate %}
														<td><b>{{ original.classify.error_rate }}</b></td>
														<td>{{ mitigated.classify.error_rate }}</td>
													{% else %}
														<td>{{ original.classify.error_rate }}</td>
														<td><b>{{ mitigated.classify.error_rate }}</b></td>
													{% endif %}
													<td></td>
												</tr>
												<tr>
													<td>Average odds difference</td>
													{% if original.classify.average_odds_difference <= mitigated.classify.average_odds_difference %}
														<td><b>{{ original.classify.average_odds_difference }}</b></td>
														<td>{{ mitigated.classify.average_odds_difference }}</td>
													{% else %}
														<td>{{ original.classify.average_odds_difference }}</td>
														<td><b>{{ mitigated.classify.average_odds_difference }}</b></td>
													{% endif %}
													<td>0.0</td>
												</tr>
												<tr>
													<td>Average abs odds difference</td>
													{% if original.classify.average_abs_odds_difference <= mitigated.classify.average_abs_odds_difference %}
														<td><b>{{ original.classify.average_abs_odds_difference }}</b></td>
														<td>{{ mitigated.classify.average_abs_odds_difference }}</td>
													{% else %}
														<td>{{ original.classify.average_abs_odds_difference }}</td>
														<td><b>{{ mitigated.classify.average_abs_odds_difference }}</b></td>
													{% endif %}
													<td>0.0</td>
												</tr>
												<tr>
													<td>Selection rate</td>
													{% if original.classify.selection_rate >= mitigated.classify.selection_rate %}
														<td><b>{{ original.classify.selection_rate }}</b></td>
														<td>{{ mitigated.classify.selection_rate }}</td>
													{% else %}
														<td>{{ original.classify.selection_rate }}</td>
														<td><b>{{ mitigated.classify.selection_rate }}</b></td>
													{% endif %}
													<td></td>
												</tr>
												<tr>
													<td>Disparate impact</td>
													{% if original.classify.disparate_impact >= mitigated.classify.disparate_impact %}
														<td><b>{{ original.classify.disparate_impact }}</b></td>
														<td>{{ mitigated.classify.disparate_impact }}</td>
													{% else %}
														<td>{{ original.classify.disparate_impact }}</td>
														<td><b>{{ mitigated.classify.disparate_impact }}</b></td>
													{% endif %}
													<td>1.0</td>
												</tr>
												<tr>
													<td>Statistical parity difference</td>
													{% if original.classify.statistical_parity_difference <= mitigated.classify.statistical_parity_difference %}
														<td><b>{{ original.classify.statistical_parity_difference }}</b></td>
														<td>{{ mitigated.classify.statistical_parity_difference }}</td>
													{% else %}
														<td>{{ original.classify.statistical_parity_difference }}</td>
														<td><b>{{ mitigated.classify.statistical_parity_difference }}</b></td>
													{% endif %}
													<td>0.0</td>
												</tr>
												<tr>
													<td>Generalized entropy index</td>
													{% if original.classify.generalized_entropy_index >= mitigated.classify.generalized_entropy_index %}
														<td><b>{{ original.classify.generalized_entropy_index }}</b></td>
														<td>{{ mitigated.classify.generalized_entropy_index }}</td>
													{% else %}
														<td>{{ original.classify.generalized_entropy_index }}</td>
														<td><b>{{ mitigated.classify.generalized_entropy_index }}</b></td>
													{% endif %}
													<td>1.0</td>
												</tr>
												<tr>
													<td>Theil index</td>
													{% if original.classify.theil_index >= mitigated.classify.theil_index %}
														<td><b>{{ original.classify.theil_index }}</b></td>
														<td>{{ mitigated.classify.theil_index }}</td>
													{% else %}
														<td>{{ original.classify.theil_index }}</td>
														<td><b>{{ mitigated.classify.theil_index }}</b></td>
													{% endif %}
													<td>1.0</td>
												</tr>
												<tr>
													<td>Equal opportunity difference</td>
													{% if original.classify.equal_opportunity_difference <= mitigated.classify.equal_opportunity_difference %}
														<td><b>{{ original.classify.equal_opportunity_difference }}</b></td>
														<td>{{ mitigated.classify.equal_opportunity_difference }}</td>
													{% else %}
														<td>{{ original.classify.equal_opportunity_difference }}</td>
														<td><b>{{ mitigated.classify.equal_opportunity_difference }}</b></td>
													{% endif %}
													<td>0.0</td>
												</tr>
											</tbody>
										</table>
									</div>
								</section>
								<br><br>

							<!-- Chart -->
								<h2>Charts of metrics</h2>
								<section>
									<h3>Performance measures</h3>
									<figure class="highcharts-figure">
										<div id="performance_bar" class="bar"></div>
										<div id="performance_bar3d" class="bar3d"></div>
										<div id="performance_spider" class="spider"></div>
									</figure>
								</section>
								<br><br>
								<section>
									<h3>Bias measures</h3>
									<figure class="highcharts-figure">
										<div id="bias_bar" class="bar"></div>
										<div id="bias_bar3d" class="bar3d"></div>
										<div id="bias_spider" class="spider"></div>
									</figure>
								</section>
								<br><br>
								<div class="row">
									<div class="col-6 col-12-medium">
										<ul class="actions">
											<li><a href="/" class="button primary fit">Home</a></li>
											<li><a href="/data" class="button fit">Data selection</a></li>
										</ul>
									</div>
								</div>
						</div>
			</div>

		<!-- Footer -->
			<footer id="footer" class="wrapper alt">
				<div class="inner">
					<ul class="menu">
						<li>&copy; Untitled. All rights reserved.</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
					</ul>
				</div>
			</footer>

		<!-- Scripts -->
			<script src="/static/assets/js/jquery.min.js"></script>
			<script src="/static/assets/js/jquery.scrollex.min.js"></script>
			<script src="/static/assets/js/jquery.scrolly.min.js"></script>
			<script src="/static/assets/js/browser.min.js"></script>
			<script src="/static/assets/js/breakpoints.min.js"></script>
			<script src="/static/assets/js/util.js"></script>
			<script src="/static/assets/js/main.js"></script>

		<!-- Bias chart script -->
			<script src="https://code.highcharts.com/highcharts.js"></script>
			<script src="https://code.highcharts.com/highcharts-3d.js"></script>
			<script src="https://code.highcharts.com/highcharts-more.js"></script>
			<script src="/static/src/bias_chart.js"></script>

		<!-- Resource Script -->
			<script>
				const performanceMeasure = {
					original: [
						{{ original.performance.true_negative_rate }}, 
						{{ original.performance.false_positive_rate }}, 
						{{ original.performance.false_negative_rate }}, 
						{{ original.performance.recall }}, 
						{{ original.performance.precision }}, 
						{{ original.performance.negative_predictive_value }}, 
						{{ original.performance.false_discovery_rate }}, 
						{{ original.performance.false_omission_rate }}, 
						{{ original.performance.accuracy }} 
					],
					mitigated: [
						{{ mitigated.performance.true_negative_rate }}, 
						{{ mitigated.performance.false_positive_rate }}, 
						{{ mitigated.performance.false_negative_rate }}, 
						{{ mitigated.performance.recall }}, 
						{{ mitigated.performance.precision }}, 
						{{ mitigated.performance.negative_predictive_value }}, 
						{{ mitigated.performance.false_discovery_rate }}, 
						{{ mitigated.performance.false_omission_rate }}, 
						{{ mitigated.performance.accuracy }}
					]
				};
				const performance_xAxis = ["TNR", "FPR", "FNR", "Recall", "Precision", "NPV", "FDR", "FOR", "ACC"];

				const biasMeasure = {
					original: [
						{{ original.classify.average_odds_difference }}, 
						{{ original.classify.selection_rate }}, 
						{{ original.classify.disparate_impact }}, 
						{{ original.classify.statistical_parity_difference }}, 
						{{ original.classify.theil_index }}, 
						{{ original.classify.equal_opportunity_difference }}
					],
					mitigated: [
						{{ mitigated.classify.average_odds_difference }}, 
						{{ mitigated.classify.selection_rate }}, 
						{{ mitigated.classify.disparate_impact }}, 
						{{ mitigated.classify.statistical_parity_difference }}, 
						{{ mitigated.classify.theil_index }}, 
						{{ mitigated.classify.equal_opportunity_difference }}
					]
				};
				const biasMeasure_xAxis = ["Average odds difference", "Selection rate", "Disparate impact", "Statistical parity difference", "Theil index", "Equal opportunity difference"];
				
				const performanceBar = new BarChart("performance_bar");
				performanceBar.setAxis(performance_xAxis);
				performanceBar.push(performanceMeasure.original, {color: "#FF0000bb", name: "Original"});
				performanceBar.push(performanceMeasure.mitigated, {name: "Mitigated"});
				performanceBar.show();

				const performanceBar3d = new BarChart3D("performance_bar3d");
				performanceBar3d.setAxis(performance_xAxis);
				performanceBar3d.push(performanceMeasure.original, {color: "#FF0000bb", name: "Original"});
				performanceBar3d.push(performanceMeasure.mitigated, {name: "Mitigated"});
				performanceBar3d.show();

				const performanceSpider = new SpiderWebChart("performance_spider");
				performanceSpider.setAxis(performance_xAxis);
				performanceSpider.push(performanceMeasure.original, {color: "#FF0000bb", name: "Original"});
				performanceSpider.push(performanceMeasure.mitigated, {name: "Mitigated"});
				performanceSpider.show();

				const biasBar = new BarChart("bias_bar");
				biasBar.setAxis(biasMeasure_xAxis);
				biasBar.push(biasMeasure.original, {color: "#FF0000bb", name: "Original"});
				biasBar.push(biasMeasure.mitigated, {name: "Mitigated"});
				biasBar.show();

				const biasBar3d = new BarChart3D("bias_bar3d");
				biasBar3d.setAxis(biasMeasure_xAxis);
				biasBar3d.push(biasMeasure.original, {color: "#FF0000bb", name: "Original"});
				biasBar3d.push(biasMeasure.mitigated, {name: "Mitigated"});
				biasBar3d.show();

				const biasSpider = new SpiderWebChart("bias_spider");
				biasSpider.setAxis(biasMeasure_xAxis);
				biasSpider.push(biasMeasure.original, {color: "#FF0000bb", name: "Original"});
				biasSpider.push(biasMeasure.mitigated, {name: "Mitigated"});
				biasSpider.show();
			</script>
	</body>
</html>